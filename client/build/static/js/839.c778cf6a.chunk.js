"use strict";(self.webpackChunkproduct_traceability_client=self.webpackChunkproduct_traceability_client||[]).push([[839],{757:(e,t,r)=>{r.d(t,{A:()=>l});var a=r(9950),s=r(3505);const l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4;const[t,r]=(0,a.useState)({totalProducts:0,totalScans:0,totalUpdates:0,recentProducts:[],recentUpdates:[],timestamp:null}),[l,d]=(0,a.useState)(!1),[n,i]=(0,a.useState)(null),o=(0,a.useRef)(null),c=(0,a.useRef)(!0),x=(0,a.useCallback)(async function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e&&d(!0),i(null);try{const e=localStorage.getItem("token");if(!e)throw new Error("No authentication token found");const d=await fetch((0,s.buildAPIURL)("/api/statistics/stats"),{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!d.ok){const e=await d.json();throw new Error(e.error||`HTTP ${d.status}`)}const i=await d.json();var t,a,l,n;if(c.current)r({totalProducts:(null===(t=i.stats)||void 0===t?void 0:t.totalProducts)||0,totalScans:(null===(a=i.stats)||void 0===a?void 0:a.totalScans)||0,totalUpdates:(null===(l=i.stats)||void 0===l?void 0:l.totalUpdates)||0,recentProducts:(null===(n=i.stats)||void 0===n?void 0:n.recentProducts)||[],timestamp:(new Date).toISOString()})}catch(o){console.error("Error fetching statistics:",o),c.current&&i(o.message)}finally{c.current&&e&&d(!1)}},[]),g=(0,a.useCallback)(()=>{o.current&&clearInterval(o.current),o.current=setInterval(()=>{x(!1)},e)},[x,e]),u=(0,a.useCallback)(()=>{o.current&&(clearInterval(o.current),o.current=null)},[]),m=(0,a.useCallback)(()=>{x(!0)},[x]);return(0,a.useEffect)(()=>(c.current=!0,x(!0),g(),()=>{c.current=!1,u()}),[x,g,u]),(0,a.useEffect)(()=>{const e=()=>{x(!1)},t=()=>{x(!0)};return window.addEventListener("productUpdated",e),window.addEventListener("productAdded",e),window.addEventListener("userLogin",t),()=>{window.removeEventListener("productUpdated",e),window.removeEventListener("productAdded",e),window.removeEventListener("userLogin",t)}},[x]),{statistics:t,loading:l,error:n,refreshStats:m,startAutoRefresh:g,stopAutoRefresh:u}}},4777:(e,t,r)=>{r.d(t,{A:()=>s});r(9950);var a=r(4414);const s=e=>{let{type:t="card",count:r=6,className:s="",animate:l=!0}=e;const d=l?"animate-pulse":"",n=()=>(0,a.jsxs)("div",{className:`bg-white dark:bg-gray-800 rounded-xl overflow-hidden border border-gray-200 dark:border-gray-700 ${s}`,children:[(0,a.jsx)("div",{className:`h-48 bg-gray-100 dark:bg-gray-700 ${d}`}),(0,a.jsxs)("div",{className:"p-4 space-y-3",children:[(0,a.jsx)("div",{className:`h-5 bg-gray-100 dark:bg-gray-700 rounded ${d}`}),(0,a.jsx)("div",{className:`h-3 bg-gray-100 dark:bg-gray-700 rounded w-2/3 ${d}`}),(0,a.jsx)("div",{className:`h-3 bg-gray-100 dark:bg-gray-700 rounded w-1/2 ${d}`}),(0,a.jsxs)("div",{className:"flex gap-2 mt-4",children:[(0,a.jsx)("div",{className:`h-8 bg-gray-100 dark:bg-gray-700 rounded flex-1 ${d}`}),(0,a.jsx)("div",{className:`h-8 bg-gray-100 dark:bg-gray-700 rounded w-8 ${d}`})]})]})]}),i=()=>{switch(t){case"product":return n();case"list":return(0,a.jsxs)("div",{className:`bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700 ${s}`,children:[(0,a.jsx)("div",{className:`h-4 bg-gray-100 dark:bg-gray-700 rounded mb-3 ${d}`}),(0,a.jsx)("div",{className:`h-3 bg-gray-100 dark:bg-gray-700 rounded w-3/4 mb-2 ${d}`}),(0,a.jsx)("div",{className:`h-3 bg-gray-100 dark:bg-gray-700 rounded w-1/2 ${d}`})]});default:return(0,a.jsxs)("div",{className:`bg-white dark:bg-gray-800 rounded-xl overflow-hidden border border-gray-200 dark:border-gray-700 ${s}`,children:[(0,a.jsx)("div",{className:`h-40 bg-gray-100 dark:bg-gray-700 ${d}`}),(0,a.jsxs)("div",{className:"p-4 space-y-3",children:[(0,a.jsx)("div",{className:`h-4 bg-gray-100 dark:bg-gray-700 rounded ${d}`}),(0,a.jsx)("div",{className:`h-3 bg-gray-100 dark:bg-gray-700 rounded w-3/4 ${d}`}),(0,a.jsx)("div",{className:`h-3 bg-gray-100 dark:bg-gray-700 rounded w-1/2 ${d}`}),(0,a.jsx)("div",{className:`h-8 bg-gray-100 dark:bg-gray-700 rounded mt-4 ${d}`})]})]})}};return"grid"===t?(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(r)].map((e,t)=>(0,a.jsx)("div",{children:n()},t))}):(0,a.jsx)("div",{className:"space-y-4",children:[...Array(r)].map((e,t)=>(0,a.jsx)("div",{children:i()},t))})}},5839:(e,t,r)=>{r.r(t),r.d(t,{default:()=>y});var a=r(9950),s=r(8429),l=r(9539),d=r(9348),n=(r(7705),r(4243)),i=r(2959),o=r(3762),c=r(8286),x=r(9095),g=r(757),u=r(4414);const m=e=>{let{className:t="",refreshInterval:r=1e4}=e;const{statistics:a,loading:s,error:d,refreshStats:i}=(0,g.A)(r);if(d)return(0,u.jsx)("div",{className:`bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-700 rounded-xl p-4 ${t}`,children:(0,u.jsx)("p",{className:"text-red-700 dark:text-red-300 text-sm",children:"Unable to load statistics"})});const o=[{title:"Total Products",value:a.totalProducts,icon:n.TXh,color:"blue",gradient:"from-blue-500 to-blue-600"},{title:"Total Scans",value:a.totalScans,icon:n.Ny1,color:"green",gradient:"from-green-500 to-green-600"},{title:"Total Updates",value:a.totalUpdates,icon:n.uO9,color:"purple",gradient:"from-purple-500 to-purple-600"}];return(0,u.jsxs)("div",{className:t,children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,u.jsxs)("div",{className:"flex items-center gap-3",children:[(0,u.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:(0,u.jsx)(n.v$b,{className:"text-white text-sm"})}),(0,u.jsx)("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-200",children:"Live Statistics"})]}),(0,u.jsx)("button",{onClick:i,disabled:s,className:"p-2 text-blue-500 hover:text-blue-600 transition-colors disabled:opacity-50 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg",title:"Refresh Statistics",children:(0,u.jsx)(n.DIg,{className:"text-sm "+(s?"animate-spin":"")})})]}),(0,u.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:o.map((e,t)=>(0,u.jsx)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:`p-4 rounded-xl bg-gradient-to-r ${e.gradient} text-white shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105`,children:(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("p",{className:"text-sm font-medium opacity-90",children:e.title}),(0,u.jsx)("p",{className:"text-2xl font-bold",children:s?"...":e.value.toLocaleString()})]}),(0,u.jsx)("div",{className:"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center",children:(0,u.jsx)(e.icon,{className:"text-xl"})})]})},e.title))}),a.recentProducts&&a.recentProducts.length>0&&(0,u.jsxs)("div",{className:"mt-6",children:[(0,u.jsxs)("h4",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-3 flex items-center gap-2",children:[(0,u.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"Recent Products"]}),(0,u.jsx)("div",{className:"space-y-2 max-h-48 overflow-y-auto custom-scrollbar",children:a.recentProducts.slice(0,8).map((e,t)=>(0,u.jsx)(l.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05*t},className:"p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg text-sm hover:bg-gray-100 dark:hover:bg-gray-700/70 transition-all duration-200 border border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500",children:(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,u.jsx)("p",{className:"font-medium text-gray-800 dark:text-gray-200 truncate",children:e.name||"Unnamed Product"}),(0,u.jsxs)("p",{className:"text-gray-500 dark:text-gray-400 text-xs truncate",children:["ID: ",e.productId]}),e.origin&&(0,u.jsxs)("p",{className:"text-gray-400 dark:text-gray-500 text-xs truncate",children:["\ud83d\udccd ",e.origin]}),e.updatedAt&&(0,u.jsxs)("p",{className:"text-gray-400 dark:text-gray-500 text-xs",children:["\ud83d\udd52 ",new Date(e.updatedAt).toLocaleDateString()," ",new Date(e.updatedAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),(0,u.jsxs)("div",{className:"flex flex-col items-end gap-1",children:[(0,u.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.stages&&e.stages.length>0&&(0,u.jsx)("span",{className:"text-xs px-2 py-1 rounded-full bg-blue-100 dark:bg-blue-900/50 text-blue-700 dark:text-blue-300 font-medium",children:e.stages[e.stages.length-1]})]})]})},e._id||t))}),0===a.recentProducts.length&&(0,u.jsxs)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[(0,u.jsx)(n.TXh,{className:"mx-auto text-2xl mb-2 opacity-50"}),(0,u.jsx)("p",{className:"text-sm",children:"No recent products found"}),(0,u.jsx)("p",{className:"text-xs",children:"Products will appear here when you add them"})]})]}),a.timestamp&&(0,u.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-4 text-center",children:["Last updated: ",new Date(a.timestamp).toLocaleTimeString()]})]})};var h=r(3291);const b=e=>{let{user:t}=e;const i=(0,s.Zp)(),[o,c]=(0,a.useState)(""),[x,g]=(0,a.useState)("productId"),[m,b]=(0,a.useState)(!1),[p,y]=(0,a.useState)([]),v=(0,a.useCallback)(async(e,t)=>{if(e.trim()){b(!0);try{const a=await Promise.resolve().then(r.bind(r,3505));let s;s="certHash"===t?a.buildAPIURL(`/api/product/by-cert-hash/${encodeURIComponent(e)}`):a.buildAPIURL(`/api/product/${encodeURIComponent(e)}`);const l=await fetch(s);if(l.ok){const e=await l.json();y([e])}else{if(404!==l.status)throw new Error(`Search failed: ${l.status}`);y([]),d.oR.error("No product found with this "+("certHash"===t?"certificate hash":"product ID"))}}catch(a){console.error("Search error:",a),y([]),d.oR.error("Error searching for product")}finally{b(!1)}}else y([])},[]),j=(0,a.useCallback)(async e=>{e.preventDefault(),o.trim()&&await v(o,x)},[o,x,v]),f=(0,a.useCallback)(e=>{i(`/product/${e.productId}`)},[i]);return(0,u.jsxs)("div",{className:"bg-white/90 dark:bg-slate-800/90 backdrop-blur-xl rounded-2xl shadow-xl p-6 border border-gray-200/50 dark:border-cyan-500/30",children:[(0,u.jsx)("h2",{className:"text-2xl font-bold mb-6 text-gray-800 dark:text-cyan-100",children:"Find Product"}),(0,u.jsx)("div",{className:"mb-4",children:(0,u.jsxs)("div",{className:"flex gap-2 mb-3",children:[(0,u.jsx)("button",{type:"button",onClick:()=>g("productId"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 "+("productId"===x?"bg-blue-500 text-white shadow-lg":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:"Product ID"}),(0,u.jsx)("button",{type:"button",onClick:()=>g("certHash"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 "+("certHash"===x?"bg-blue-500 text-white shadow-lg":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:"Certificate Hash"})]})}),(0,u.jsxs)("form",{onSubmit:j,className:"mb-6",children:[(0,u.jsxs)("div",{className:"relative",children:[(0,u.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,u.jsx)(n.KSO,{className:"h-5 w-5 text-gray-400"})}),(0,u.jsx)("input",{type:"text",value:o,onChange:e=>c(e.target.value),placeholder:`Enter ${"certHash"===x?"certificate hash":"product ID"}...`,className:"w-full pl-10 pr-4 py-3 bg-white/70 dark:bg-gray-700/70 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent backdrop-blur-sm transition-all duration-200",disabled:m}),m&&(0,u.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:(0,u.jsx)(n.hW,{className:"animate-spin text-blue-500"})})]}),(0,u.jsx)("button",{type:"submit",disabled:!o.trim()||m,className:"w-full mt-3 py-3 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed text-white rounded-lg font-medium transition-all duration-200 flex items-center justify-center gap-2",children:m?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(n.hW,{className:"animate-spin"}),"Searching..."]}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(n.KSO,{}),"Search Product"]})})]}),(0,u.jsx)(h.N,{children:p.length>0&&(0,u.jsx)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-3",children:p.map(e=>{var t;return(0,u.jsx)("div",{onClick:()=>f(e),className:"bg-white dark:bg-gray-700 rounded-xl p-4 shadow-md hover:shadow-lg transition-shadow cursor-pointer border border-gray-200 dark:border-gray-600",children:(0,u.jsxs)("div",{className:"flex items-start justify-between",children:[(0,u.jsxs)("div",{className:"flex-1",children:[(0,u.jsx)("h3",{className:"font-semibold text-gray-800 dark:text-gray-100 mb-1",children:e.name||"Unnamed Product"}),(0,u.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:["ID: ",e.productId]}),(0,u.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:[e.manufacturer," \u2022 ",e.origin]}),e.stages&&e.stages.length>0&&(0,u.jsx)("div",{className:"mt-2",children:(0,u.jsx)("span",{className:"inline-block px-2 py-1 text-xs font-medium bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-full",children:e.stages[e.stages.length-1]})})]}),(0,u.jsx)("div",{className:"ml-4 flex-shrink-0",children:null!==(t=e.imageFile)&&void 0!==t&&t.publicUrl?(0,u.jsx)("img",{src:e.imageFile.publicUrl,alt:e.name,className:"w-16 h-16 object-cover rounded-lg",onError:e=>{e.target.style.display="none"}}):(0,u.jsx)("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-600 rounded-lg flex items-center justify-center",children:(0,u.jsx)(n.TXh,{className:"text-gray-400 text-xl"})})})]})},e.productId)})})}),(0,u.jsx)("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-600",children:(0,u.jsxs)("button",{onClick:()=>i("/scan"),className:"w-full py-3 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white rounded-lg font-medium transition-all duration-200 flex items-center justify-center gap-2",children:[(0,u.jsx)(n.Acq,{}),"Scan QR Code Instead"]})})]})};var p=r(4777);const y=function(){const e=(0,s.Zp)(),[t,g]=(0,a.useState)(""),[h,y]=(0,a.useState)(""),[v,j]=(0,a.useState)(null),[f,k]=(0,a.useState)(!0),[N,w]=(0,a.useState)([]),[S,A]=(0,a.useState)(!1),[I,P]=(0,a.useState)(null);(0,a.useEffect)(()=>{const e=localStorage.getItem("token");if(e)try{const t=JSON.parse(atob(e.split(".")[1]));t&&t.email&&t.role?j({email:t.email,role:t.role}):(console.error("Invalid token payload:",t),j(null))}catch(t){console.error("Error parsing token:",t),j(null),localStorage.removeItem("token")}else j(null);k(!1)},[]),(0,a.useEffect)(()=>{if(v){C();const e=setInterval(C,6e4);return()=>{clearInterval(e)}}},[v]);const C=async()=>{A(!0),P(null);try{console.log("Fetching recent products...");const e=(await Promise.resolve().then(r.bind(r,3505))).buildAPIURL("/api/recent-products?limit=6"),t=await fetch(e);if(console.log("Response status:",t.status),console.log("Response OK:",t.ok),!t.ok)throw new Error(`Failed to fetch recent products: ${t.status} ${t.statusText}`);const a=await t.json();console.log("API Response:",a),Array.isArray(a)?(w(a),0===a.length?console.log("No recent products found in database"):console.log(`Retrieved ${a.length} recent products`)):(console.error("Unexpected response format:",a),P("Unexpected response format from server"))}catch(e){console.error("Error fetching recent products:",e),P(e.message);try{console.log("Trying with API config...");const e=(await Promise.resolve().then(r.bind(r,3505))).buildAPIURL("/api/recent-products?limit=6");console.log("API URL:",e);const t=await fetch(e);if(t.ok){const e=await t.json();w(e),P(null),console.log("Fallback API call successful")}}catch(t){console.error("Fallback API call also failed:",t)}}finally{A(!1)}};return f?(0,u.jsx)("div",{className:"min-h-screen transition-all duration-300\r bg-gradient-to-br from-gray-50 via-blue-50 to-indigo-50 \r dark:bg-gradient-to-br dark:from-gray-900 dark:via-blue-900 dark:to-indigo-900",children:(0,u.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 dark:border-blue-400 mx-auto mb-4"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Loading..."})]})})}):v?(0,u.jsxs)("div",{className:"min-h-screen relative overflow-hidden\r bg-gradient-to-br from-gray-50 via-blue-50 to-indigo-50 \r dark:bg-gradient-to-br dark:from-gray-900 dark:via-blue-900 dark:to-indigo-900\r transition-all duration-500",children:[(0,u.jsx)("div",{className:"absolute inset-0 opacity-20 dark:opacity-30",children:(0,u.jsx)(x.A,{count:30})}),(0,u.jsx)("div",{className:"absolute inset-0 opacity-5 dark:opacity-10",children:(0,u.jsx)("div",{className:"absolute inset-0",style:{backgroundImage:"\n              linear-gradient(rgba(59, 130, 246, 0.1) 1px, transparent 1px),\n              linear-gradient(90deg, rgba(59, 130, 246, 0.1) 1px, transparent 1px)\n            ",backgroundSize:"60px 60px"}})}),(0,u.jsx)(d.N9,{position:"top-center",theme:"auto"}),(0,u.jsxs)("div",{className:"relative z-10 px-4 sm:px-6 lg:px-8 py-8",children:[(0,u.jsxs)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-12",children:[(0,u.jsxs)("h1",{className:"text-4xl sm:text-5xl md:text-6xl font-bold mb-4 leading-tight\r text-gray-900 dark:text-white",children:["Welcome back,",(0,u.jsxs)("span",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 \r dark:from-blue-400 dark:to-indigo-400 \r bg-clip-text text-transparent block mt-2",children:[v.email?v.email.split("@")[0]:"User","!"]})]}),(0,u.jsx)("p",{className:"text-xl max-w-2xl mx-auto text-gray-600 dark:text-gray-300",children:"Manage your product traceability with enterprise-grade blockchain technology"})]}),(0,u.jsx)("div",{className:"max-w-md mx-auto h-64 mb-12",children:(0,u.jsx)(i.A,{variant:"blockchain"})}),(0,u.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mb-12 max-w-6xl mx-auto",children:[(0,u.jsx)(o.A,{delay:.1,className:"group cursor-pointer",onClick:()=>e("/scan"),children:(0,u.jsxs)("div",{className:"p-6 rounded-xl transition-all duration-300 shadow-lg \r bg-white hover:bg-gray-50 border border-gray-200\r dark:bg-slate-800 dark:hover:bg-slate-700 dark:border-slate-600\r hover:shadow-xl transform hover:-translate-y-1",children:[(0,u.jsx)("div",{className:"w-12 h-12 rounded-lg mb-4 flex items-center justify-center \r bg-gradient-to-r from-blue-500 to-indigo-500 \r group-hover:scale-105 transition-transform duration-300",children:(0,u.jsx)(n.Acq,{className:"text-white text-xl"})}),(0,u.jsx)("h3",{className:"text-xl font-semibold mb-2\r text-gray-800 dark:text-white",children:"Scan QR Code"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Quickly verify product authenticity"})]})}),v&&"producer"===v.role&&(0,u.jsx)(o.A,{delay:.2,className:"group cursor-pointer",onClick:()=>e("/admin/add"),children:(0,u.jsxs)("div",{className:"p-6 rounded-xl transition-all duration-300 shadow-lg\r bg-white hover:bg-gray-50 border border-gray-200\r dark:bg-slate-800 dark:hover:bg-slate-700 dark:border-slate-600\r hover:shadow-xl transform hover:-translate-y-1",children:[(0,u.jsx)("div",{className:"w-12 h-12 rounded-lg mb-4 flex items-center justify-center\r bg-gradient-to-r from-green-500 to-emerald-500\r group-hover:scale-105 transition-transform duration-300",children:(0,u.jsx)(n.OiG,{className:"text-white text-xl"})}),(0,u.jsx)("h3",{className:"text-xl font-semibold mb-2\r text-gray-800 dark:text-white",children:"Add Product"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Register new products on blockchain"})]})}),(0,u.jsx)(o.A,{delay:.3,className:"group cursor-pointer",onClick:()=>e("/admin/dashboard"),children:(0,u.jsxs)("div",{className:"p-6 rounded-xl transition-all duration-300 shadow-lg\r bg-white hover:bg-gray-50 border border-gray-200\r dark:bg-slate-800 dark:hover:bg-slate-700 dark:border-slate-600\r hover:shadow-xl transform hover:-translate-y-1",children:[(0,u.jsx)("div",{className:"w-12 h-12 rounded-lg mb-4 flex items-center justify-center\r bg-gradient-to-r from-purple-500 to-pink-500\r group-hover:scale-105 transition-transform duration-300",children:(0,u.jsx)(n.YYR,{className:"text-white text-xl"})}),(0,u.jsx)("h3",{className:"text-xl font-semibold mb-2\r text-gray-800 dark:text-white",children:"Dashboard"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"View analytics and insights"})]})})]}),(0,u.jsx)(o.A,{delay:.35,className:"max-w-4xl mx-auto mb-12",children:(0,u.jsx)(m,{className:"p-8",refreshInterval:8e3})}),(0,u.jsx)(o.A,{delay:.38,className:"max-w-2xl mx-auto mb-12",children:(0,u.jsx)(b,{user:v})}),(0,u.jsx)(o.A,{delay:.42,className:"max-w-6xl mx-auto mb-12",children:(0,u.jsxs)("div",{className:"p-8 rounded-xl shadow-lg transition-all duration-300\r bg-white border border-gray-200\r dark:bg-slate-800 dark:border-slate-600",children:[(0,u.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,u.jsx)("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Recent Products"}),(0,u.jsxs)("button",{onClick:C,className:"text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 flex items-center gap-2 transition-colors",children:[(0,u.jsx)("span",{children:"Refresh"}),(0,u.jsx)(n.OKX,{className:S?"animate-spin":""})]})]}),I&&(0,u.jsxs)("div",{className:"bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 p-4 rounded-lg mb-6 flex items-center gap-3",children:[(0,u.jsx)(n.TNq,{}),(0,u.jsxs)("span",{children:["Error loading recent products: ",I]})]}),S?(0,u.jsx)(p.A,{type:"grid",count:6}):N.length>0?(0,u.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:N.map(t=>{var r;return(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl overflow-hidden shadow-md hover:shadow-lg transition-shadow border border-gray-200 dark:border-gray-700 flex flex-col",children:[(0,u.jsxs)("div",{className:"h-40 bg-gray-100 dark:bg-gray-700 relative",children:[null!==(r=t.imageFile)&&void 0!==r&&r.publicUrl?(0,u.jsx)("img",{src:t.imageFile.publicUrl,alt:t.name||"Product",className:"w-full h-full object-cover",onError:e=>{e.target.onerror=null,e.target.src="https://via.placeholder.com/400x200?text=No+Image"}}):(0,u.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,u.jsx)(n.TXh,{className:"text-gray-400 text-4xl"})}),t.stages&&t.stages.length>0&&(0,u.jsx)("div",{className:"absolute top-2 right-2 bg-blue-500 text-white text-xs font-bold py-1 px-2 rounded-full",children:t.stages[t.stages.length-1]||t.stage||"Created"})]}),(0,u.jsxs)("div",{className:"p-4 flex-grow",children:[(0,u.jsx)("h3",{className:"font-semibold text-gray-800 dark:text-gray-100 mb-1 truncate",children:t.name||"Unnamed Product"}),(0,u.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2 truncate",children:["ID: ",t.productId||t._id||"Unknown"]}),(0,u.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-500 mb-4",children:t.createdAt?new Date(t.createdAt).toLocaleDateString():"Unknown date"})]}),(0,u.jsx)("div",{className:"p-4 pt-0 mt-auto",children:(0,u.jsxs)("button",{onClick:()=>e(`/product/${t.productId}`),className:"w-full py-2 text-center bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors text-sm font-medium flex items-center justify-center gap-2",children:[(0,u.jsx)(n.Ny1,{}),(0,u.jsx)("span",{children:"View Details"})]})})]},t.productId||t._id)})}):(0,u.jsxs)("div",{className:"text-center py-12",children:[(0,u.jsx)(n.TXh,{className:"text-gray-400 text-4xl mx-auto mb-4"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"No products found"}),v&&"producer"===v.role&&(0,u.jsxs)("button",{onClick:()=>e("/admin/add"),className:"mt-4 px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors text-sm inline-flex items-center gap-2",children:[(0,u.jsx)(n.OiG,{}),(0,u.jsx)("span",{children:"Add Your First Product"})]})]})]})})]})]}):(0,u.jsxs)("div",{className:"min-h-screen relative overflow-hidden transition-all duration-1000\r bg-gradient-to-br from-blue-50 via-indigo-100 to-purple-100 \r dark:bg-gradient-to-br dark:from-slate-900 dark:via-indigo-950 dark:to-purple-950",children:[(0,u.jsx)("div",{className:"absolute inset-0 opacity-40 dark:opacity-70 transition-opacity duration-1000",children:(0,u.jsx)(x.A,{count:80})}),(0,u.jsxs)("div",{className:"absolute inset-0 opacity-30 dark:opacity-0 transition-opacity duration-1000",children:[(0,u.jsx)("div",{className:"absolute top-1/4 left-1/4 w-64 h-64 rounded-full bg-gradient-to-r from-blue-200/50 to-purple-200/50 animate-pulse blur-3xl"}),(0,u.jsx)("div",{className:"absolute bottom-1/4 right-1/4 w-48 h-48 rounded-full bg-gradient-to-r from-purple-200/50 to-pink-200/50 animate-pulse delay-1000 blur-2xl"}),(0,u.jsx)("div",{className:"absolute top-1/2 right-1/3 w-32 h-32 rounded-full bg-gradient-to-r from-cyan-200/50 to-blue-200/50 animate-bounce blur-xl"})]}),(0,u.jsxs)("div",{className:"absolute inset-0 opacity-0 dark:opacity-20 transition-opacity duration-1000 overflow-hidden",children:[Array.from({length:20}).map((e,t)=>(0,u.jsx)("div",{className:"absolute w-1 bg-gradient-to-b from-transparent via-cyan-400 to-transparent animate-pulse",style:{left:5+4*t+"%",height:"100%",animationDelay:.1*t+"s",animationDuration:"3s"}},t)),(0,u.jsx)("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-b from-transparent via-purple-900/10 to-transparent"})]}),(0,u.jsx)(d.N9,{position:"top-center",theme:"auto"}),(0,u.jsx)("div",{className:"relative z-10 flex items-center justify-center min-h-screen px-4",children:(0,u.jsxs)("div",{className:"text-center max-w-4xl mx-auto",children:[(0,u.jsxs)(l.P.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},className:"mb-12",children:[(0,u.jsx)("div",{className:"max-w-md mx-auto h-64 mb-8",children:(0,u.jsx)(i.A,{variant:"hero"})}),(0,u.jsxs)("h1",{className:"text-5xl md:text-7xl font-bold mb-6 leading-tight\r text-gray-800 dark:text-transparent\r dark:bg-gradient-to-r dark:from-cyan-300 dark:via-purple-300 dark:to-pink-300 \r dark:bg-clip-text dark:animate-pulse",children:["Welcome to",(0,u.jsx)("span",{className:"bg-gradient-to-r from-blue-600 to-purple-600 \r dark:from-cyan-400 dark:via-purple-400 dark:to-pink-400 \r bg-clip-text text-transparent block\r dark:drop-shadow-[0_0_30px_rgba(0,255,255,0.6)]\r dark:filter dark:brightness-125",children:"TraceChain"})]}),(0,u.jsx)("p",{className:"text-xl mb-8 max-w-2xl mx-auto\r text-gray-600 dark:text-cyan-100 \r dark:drop-shadow-[0_0_10px_rgba(0,255,255,0.4)]",children:"Experience transparent, secure product traceability powered by blockchain technology"}),(0,u.jsx)("div",{className:"hidden dark:block absolute inset-0 pointer-events-none",children:(0,u.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 \r w-[800px] h-[800px] bg-gradient-conic from-cyan-500/20 via-purple-500/20 to-pink-500/20 \r rounded-full blur-3xl animate-spin",style:{animationDuration:"20s"}})})]}),(0,u.jsxs)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"flex flex-wrap gap-4 justify-center",children:[(0,u.jsx)(c.A,{variant:"primary",size:"lg",onClick:()=>{console.log("Get Started button clicked"),e("/auth/login")},children:"Get Started"}),(0,u.jsxs)(c.A,{variant:"ghost",size:"lg",onClick:()=>{console.log("Scan QR Code button clicked"),e("/scan")},children:[(0,u.jsx)(n.Acq,{className:"mr-2"}),"Scan QR Code"]})]})]})})]})}}}]);