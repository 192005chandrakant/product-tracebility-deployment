"use strict";(self.webpackChunkproduct_traceability_client=self.webpackChunkproduct_traceability_client||[]).push([[839],{757:(e,t,r)=>{r.d(t,{A:()=>l});var a=r(9950),s=r(3505);const l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4;const[t,r]=(0,a.useState)({totalProducts:0,totalScans:0,totalUpdates:0,recentProducts:[],recentUpdates:[],timestamp:null}),[l,o]=(0,a.useState)(!1),[n,d]=(0,a.useState)(null),i=(0,a.useRef)(null),c=(0,a.useRef)(!0),x=(0,a.useCallback)(async function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e&&o(!0),d(null);try{const e=localStorage.getItem("token");if(!e)throw new Error("No authentication token found");const o=await fetch((0,s.buildAPIURL)("/api/statistics/stats"),{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!o.ok){const e=await o.json();throw new Error(e.error||`HTTP ${o.status}`)}const d=await o.json();var t,a,l,n;if(c.current)r({totalProducts:(null===(t=d.stats)||void 0===t?void 0:t.totalProducts)||0,totalScans:(null===(a=d.stats)||void 0===a?void 0:a.totalScans)||0,totalUpdates:(null===(l=d.stats)||void 0===l?void 0:l.totalUpdates)||0,recentProducts:(null===(n=d.stats)||void 0===n?void 0:n.recentProducts)||[],timestamp:(new Date).toISOString()})}catch(i){console.error("Error fetching statistics:",i),c.current&&d(i.message)}finally{c.current&&e&&o(!1)}},[]),u=(0,a.useCallback)(()=>{i.current&&clearInterval(i.current),i.current=setInterval(()=>{x(!1)},e)},[x,e]),m=(0,a.useCallback)(()=>{i.current&&(clearInterval(i.current),i.current=null)},[]),g=(0,a.useCallback)(()=>{x(!0)},[x]);return(0,a.useEffect)(()=>(c.current=!0,x(!0),u(),()=>{c.current=!1,m()}),[x,u,m]),(0,a.useEffect)(()=>{const e=()=>{x(!1)},t=()=>{x(!0)};return window.addEventListener("productUpdated",e),window.addEventListener("productAdded",e),window.addEventListener("userLogin",t),()=>{window.removeEventListener("productUpdated",e),window.removeEventListener("productAdded",e),window.removeEventListener("userLogin",t)}},[x]),{statistics:t,loading:l,error:n,refreshStats:g,startAutoRefresh:u,stopAutoRefresh:m}}},5839:(e,t,r)=>{r.r(t),r.d(t,{default:()=>b});var a=r(9950),s=r(8429),l=r(9539),o=r(9348),n=(r(7705),r(4243)),d=r(2959),i=r(3762),c=r(8286),x=r(9095),u=r(757),m=r(4414);const g=e=>{let{className:t="",refreshInterval:r=1e4}=e;const{statistics:a,loading:s,error:o,refreshStats:d}=(0,u.A)(r);if(o)return(0,m.jsx)("div",{className:`bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-700 rounded-xl p-4 ${t}`,children:(0,m.jsx)("p",{className:"text-red-700 dark:text-red-300 text-sm",children:"Unable to load statistics"})});const i=[{title:"Total Products",value:a.totalProducts,icon:n.TXh,color:"blue",gradient:"from-blue-500 to-blue-600"},{title:"Total Scans",value:a.totalScans,icon:n.Ny1,color:"green",gradient:"from-green-500 to-green-600"},{title:"Total Updates",value:a.totalUpdates,icon:n.uO9,color:"purple",gradient:"from-purple-500 to-purple-600"}];return(0,m.jsxs)("div",{className:t,children:[(0,m.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,m.jsxs)("div",{className:"flex items-center gap-3",children:[(0,m.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:(0,m.jsx)(n.v$b,{className:"text-white text-sm"})}),(0,m.jsx)("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-200",children:"Live Statistics"})]}),(0,m.jsx)("button",{onClick:d,disabled:s,className:"p-2 text-blue-500 hover:text-blue-600 transition-colors disabled:opacity-50 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg",title:"Refresh Statistics",children:(0,m.jsx)(n.DIg,{className:"text-sm "+(s?"animate-spin":"")})})]}),(0,m.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:i.map((e,t)=>(0,m.jsx)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:`p-4 rounded-xl bg-gradient-to-r ${e.gradient} text-white shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105`,children:(0,m.jsxs)("div",{className:"flex items-center justify-between",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("p",{className:"text-sm font-medium opacity-90",children:e.title}),(0,m.jsx)("p",{className:"text-2xl font-bold",children:s?"...":e.value.toLocaleString()})]}),(0,m.jsx)("div",{className:"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center",children:(0,m.jsx)(e.icon,{className:"text-xl"})})]})},e.title))}),a.recentProducts&&a.recentProducts.length>0&&(0,m.jsxs)("div",{className:"mt-6",children:[(0,m.jsxs)("h4",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-3 flex items-center gap-2",children:[(0,m.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"Recent Products"]}),(0,m.jsx)("div",{className:"space-y-2 max-h-48 overflow-y-auto custom-scrollbar",children:a.recentProducts.slice(0,8).map((e,t)=>(0,m.jsx)(l.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05*t},className:"p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg text-sm hover:bg-gray-100 dark:hover:bg-gray-700/70 transition-all duration-200 border border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500",children:(0,m.jsxs)("div",{className:"flex items-center justify-between",children:[(0,m.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,m.jsx)("p",{className:"font-medium text-gray-800 dark:text-gray-200 truncate",children:e.name||"Unnamed Product"}),(0,m.jsxs)("p",{className:"text-gray-500 dark:text-gray-400 text-xs truncate",children:["ID: ",e.productId]}),e.origin&&(0,m.jsxs)("p",{className:"text-gray-400 dark:text-gray-500 text-xs truncate",children:["\ud83d\udccd ",e.origin]}),e.updatedAt&&(0,m.jsxs)("p",{className:"text-gray-400 dark:text-gray-500 text-xs",children:["\ud83d\udd52 ",new Date(e.updatedAt).toLocaleDateString()," ",new Date(e.updatedAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),(0,m.jsxs)("div",{className:"flex flex-col items-end gap-1",children:[(0,m.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.stages&&e.stages.length>0&&(0,m.jsx)("span",{className:"text-xs px-2 py-1 rounded-full bg-blue-100 dark:bg-blue-900/50 text-blue-700 dark:text-blue-300 font-medium",children:e.stages[e.stages.length-1]})]})]})},e._id||t))}),0===a.recentProducts.length&&(0,m.jsxs)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[(0,m.jsx)(n.TXh,{className:"mx-auto text-2xl mb-2 opacity-50"}),(0,m.jsx)("p",{className:"text-sm",children:"No recent products found"}),(0,m.jsx)("p",{className:"text-xs",children:"Products will appear here when you add them"})]})]}),a.timestamp&&(0,m.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-4 text-center",children:["Last updated: ",new Date(a.timestamp).toLocaleTimeString()]})]})};var p=r(3291);const h=e=>{let{user:t}=e;const d=(0,s.Zp)(),[i,c]=(0,a.useState)(""),[x,u]=(0,a.useState)("productId"),[g,h]=(0,a.useState)(!1),[b,y]=(0,a.useState)([]),f=(0,a.useCallback)(async(e,t)=>{if(e.trim()){h(!0);try{const a=await Promise.resolve().then(r.bind(r,3505));let s;s="certHash"===t?a.buildAPIURL(`/api/product/by-cert-hash/${encodeURIComponent(e)}`):a.buildAPIURL(`/api/product/${encodeURIComponent(e)}`);const l=await fetch(s);if(l.ok){const e=await l.json();y([e])}else{if(404!==l.status)throw new Error(`Search failed: ${l.status}`);y([]),o.oR.error("No product found with this "+("certHash"===t?"certificate hash":"product ID"))}}catch(a){console.error("Search error:",a),y([]),o.oR.error("Error searching for product")}finally{h(!1)}}else y([])},[]),v=(0,a.useCallback)(async e=>{e.preventDefault(),i.trim()&&await f(i,x)},[i,x,f]),k=(0,a.useCallback)(e=>{d(`/product/${e.productId}`)},[d]);return(0,m.jsxs)("div",{className:"bg-white/90 dark:bg-slate-800/90 backdrop-blur-xl rounded-2xl shadow-xl p-6 border border-gray-200/50 dark:border-cyan-500/30",children:[(0,m.jsx)("h2",{className:"text-2xl font-bold mb-6 text-gray-800 dark:text-cyan-100",children:"Find Product"}),(0,m.jsx)("div",{className:"mb-4",children:(0,m.jsxs)("div",{className:"flex gap-2 mb-3",children:[(0,m.jsx)("button",{type:"button",onClick:()=>u("productId"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 "+("productId"===x?"bg-blue-500 text-white shadow-lg":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:"Product ID"}),(0,m.jsx)("button",{type:"button",onClick:()=>u("certHash"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 "+("certHash"===x?"bg-blue-500 text-white shadow-lg":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:"Certificate Hash"})]})}),(0,m.jsxs)("form",{onSubmit:v,className:"mb-6",children:[(0,m.jsxs)("div",{className:"relative",children:[(0,m.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,m.jsx)(n.KSO,{className:"h-5 w-5 text-gray-400"})}),(0,m.jsx)("input",{type:"text",value:i,onChange:e=>c(e.target.value),placeholder:`Enter ${"certHash"===x?"certificate hash":"product ID"}...`,className:"w-full pl-10 pr-4 py-3 bg-white/70 dark:bg-gray-700/70 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent backdrop-blur-sm transition-all duration-200",disabled:g}),g&&(0,m.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:(0,m.jsx)(n.hW,{className:"animate-spin text-blue-500"})})]}),(0,m.jsx)("button",{type:"submit",disabled:!i.trim()||g,className:"w-full mt-3 py-3 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed text-white rounded-lg font-medium transition-all duration-200 flex items-center justify-center gap-2",children:g?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(n.hW,{className:"animate-spin"}),"Searching..."]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(n.KSO,{}),"Search Product"]})})]}),(0,m.jsx)(p.N,{children:b.length>0&&(0,m.jsx)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-3",children:b.map(e=>{var t;return(0,m.jsx)("div",{onClick:()=>k(e),className:"bg-white dark:bg-gray-700 rounded-xl p-4 shadow-md hover:shadow-lg transition-shadow cursor-pointer border border-gray-200 dark:border-gray-600",children:(0,m.jsxs)("div",{className:"flex items-start justify-between",children:[(0,m.jsxs)("div",{className:"flex-1",children:[(0,m.jsx)("h3",{className:"font-semibold text-gray-800 dark:text-gray-100 mb-1",children:e.name||"Unnamed Product"}),(0,m.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:["ID: ",e.productId]}),(0,m.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:[e.manufacturer," \u2022 ",e.origin]}),e.stages&&e.stages.length>0&&(0,m.jsx)("div",{className:"mt-2",children:(0,m.jsx)("span",{className:"inline-block px-2 py-1 text-xs font-medium bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-full",children:e.stages[e.stages.length-1]})})]}),(0,m.jsx)("div",{className:"ml-4 flex-shrink-0",children:null!==(t=e.imageFile)&&void 0!==t&&t.publicUrl?(0,m.jsx)("img",{src:e.imageFile.publicUrl,alt:e.name,className:"w-16 h-16 object-cover rounded-lg",onError:e=>{e.target.style.display="none"}}):(0,m.jsx)("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-600 rounded-lg flex items-center justify-center",children:(0,m.jsx)(n.TXh,{className:"text-gray-400 text-xl"})})})]})},e.productId)})})}),(0,m.jsx)("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-600",children:(0,m.jsxs)("button",{onClick:()=>d("/scan"),className:"w-full py-3 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white rounded-lg font-medium transition-all duration-200 flex items-center justify-center gap-2",children:[(0,m.jsx)(n.Acq,{}),"Scan QR Code Instead"]})})]})};const b=function(){const e=(0,s.Zp)(),[t,u]=(0,a.useState)(""),[p,b]=(0,a.useState)(""),[y,f]=(0,a.useState)(null),[v,k]=(0,a.useState)(!0),[j,N]=(0,a.useState)([]),[w,S]=(0,a.useState)(!1),[I,P]=(0,a.useState)(null);(0,a.useEffect)(()=>{const e=localStorage.getItem("token");if(e)try{const t=JSON.parse(atob(e.split(".")[1]));t&&t.email&&t.role?f({email:t.email,role:t.role}):(console.error("Invalid token payload:",t),f(null))}catch(t){console.error("Error parsing token:",t),f(null),localStorage.removeItem("token")}else f(null);k(!1)},[]),(0,a.useEffect)(()=>{if(y){A();const e=setInterval(A,6e4);return()=>{clearInterval(e)}}},[y]);const A=async()=>{S(!0),P(null);try{console.log("Fetching recent products...");const e=(await Promise.resolve().then(r.bind(r,3505))).buildAPIURL("/api/recent-products?limit=6"),t=await fetch(e);if(console.log("Response status:",t.status),console.log("Response OK:",t.ok),!t.ok)throw new Error(`Failed to fetch recent products: ${t.status} ${t.statusText}`);const a=await t.json();console.log("API Response:",a),Array.isArray(a)?(N(a),0===a.length?console.log("No recent products found in database"):console.log(`Retrieved ${a.length} recent products`)):(console.error("Unexpected response format:",a),P("Unexpected response format from server"))}catch(e){console.error("Error fetching recent products:",e),P(e.message);try{console.log("Trying with API config...");const e=(await Promise.resolve().then(r.bind(r,3505))).buildAPIURL("/api/recent-products?limit=6");console.log("API URL:",e);const t=await fetch(e);if(t.ok){const e=await t.json();N(e),P(null),console.log("Fallback API call successful")}}catch(t){console.error("Fallback API call also failed:",t)}}finally{S(!1)}};return v?(0,m.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 dark:from-slate-900 dark:via-purple-900 dark:to-slate-900",children:(0,m.jsxs)("div",{className:"text-center",children:[(0,m.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 dark:border-cyan-400 mx-auto mb-4"}),(0,m.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Loading..."})]})}):y?(0,m.jsxs)("div",{className:"min-h-screen relative overflow-hidden\r bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 \r dark:bg-gradient-to-br dark:from-indigo-950 dark:via-purple-950 dark:to-slate-900\r transition-all duration-1000",children:[(0,m.jsx)("div",{className:"absolute inset-0 opacity-30 dark:opacity-80",children:(0,m.jsx)(x.A,{count:60})}),(0,m.jsxs)("div",{className:"absolute inset-0 opacity-20 dark:opacity-0 transition-opacity duration-1000",children:[(0,m.jsx)("div",{className:"absolute top-20 left-20 w-32 h-32 rounded-full bg-gradient-to-r from-blue-300 to-cyan-300 animate-pulse"}),(0,m.jsx)("div",{className:"absolute bottom-32 right-32 w-24 h-24 rounded-full bg-gradient-to-r from-purple-300 to-pink-300 animate-bounce"}),(0,m.jsx)("div",{className:"absolute top-1/2 left-1/3 w-16 h-16 rounded-full bg-gradient-to-r from-green-300 to-emerald-300 animate-pulse delay-1000"})]}),(0,m.jsxs)("div",{className:"absolute inset-0 opacity-0 dark:opacity-30 transition-opacity duration-1000",children:[(0,m.jsx)("div",{className:"absolute inset-0",style:{backgroundImage:"\n              linear-gradient(rgba(0, 255, 255, 0.1) 1px, transparent 1px),\n              linear-gradient(90deg, rgba(0, 255, 255, 0.1) 1px, transparent 1px),\n              linear-gradient(rgba(255, 0, 255, 0.05) 1px, transparent 1px),\n              linear-gradient(90deg, rgba(255, 0, 255, 0.05) 1px, transparent 1px)\n            ",backgroundSize:"50px 50px, 50px 50px, 10px 10px, 10px 10px"}}),(0,m.jsx)("div",{className:"absolute top-10 left-10 w-40 h-1 bg-gradient-to-r from-cyan-400 to-transparent animate-pulse"}),(0,m.jsx)("div",{className:"absolute top-20 right-20 w-1 h-40 bg-gradient-to-b from-purple-400 to-transparent animate-pulse delay-500"}),(0,m.jsx)("div",{className:"absolute bottom-20 left-1/3 w-60 h-1 bg-gradient-to-r from-transparent via-pink-400 to-transparent animate-pulse delay-1000"}),(0,m.jsx)("div",{className:"absolute top-1/3 right-10 w-1 h-60 bg-gradient-to-b from-transparent via-blue-400 to-transparent animate-pulse delay-1500"})]}),(0,m.jsx)(o.N9,{position:"top-center",theme:"auto"}),(0,m.jsxs)("div",{className:"relative z-10 px-4 sm:px-6 lg:px-8 py-8",children:[(0,m.jsxs)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-12",children:[(0,m.jsxs)("h1",{className:"text-4xl sm:text-5xl md:text-6xl font-bold mb-4 leading-tight\r text-gray-800 dark:text-transparent \r dark:bg-gradient-to-r dark:from-cyan-300 dark:via-purple-300 dark:to-pink-300 \r dark:bg-clip-text dark:animate-pulse",children:["Welcome back,",(0,m.jsxs)("span",{className:"bg-gradient-to-r from-blue-600 to-purple-600 \r dark:from-cyan-400 dark:via-purple-400 dark:to-pink-400 \r bg-clip-text text-transparent block mt-2\r dark:drop-shadow-[0_0_20px_rgba(0,255,255,0.5)]",children:[y.email?y.email.split("@")[0]:"User","!"]})]}),(0,m.jsx)("p",{className:"text-xl max-w-2xl mx-auto\r text-gray-600 dark:text-cyan-100 \r dark:drop-shadow-[0_0_10px_rgba(0,255,255,0.3)]",children:"Ready to manage your product traceability with blockchain technology?"}),(0,m.jsx)("div",{className:"hidden dark:block absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 \r w-96 h-96 bg-gradient-to-r from-cyan-500/10 to-purple-500/10 rounded-full blur-3xl animate-pulse"})]}),(0,m.jsx)("div",{className:"max-w-md mx-auto h-64 mb-12",children:(0,m.jsx)(d.A,{variant:"blockchain"})}),(0,m.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mb-12 max-w-6xl mx-auto",children:[(0,m.jsx)(i.A,{delay:.1,className:"group cursor-pointer",onClick:()=>e("/scan"),children:(0,m.jsxs)("div",{className:"p-6 rounded-2xl transition-all duration-300 shadow-lg \r bg-white/80 hover:bg-white/90 border border-gray-200/50\r dark:bg-slate-800/30 dark:hover:bg-slate-800/50 dark:border-cyan-500/30\r dark:backdrop-blur-xl dark:shadow-cyan-500/20\r dark:hover:shadow-cyan-400/40 dark:hover:border-cyan-400/50\r dark:hover:shadow-2xl dark:hover:scale-105",children:[(0,m.jsx)("div",{className:"w-12 h-12 rounded-xl mb-4 flex items-center justify-center \r bg-gradient-to-r from-blue-500 to-cyan-500 \r group-hover:scale-110 transition-transform duration-300\r dark:shadow-[0_0_20px_rgba(0,255,255,0.4)]\r dark:group-hover:shadow-[0_0_30px_rgba(0,255,255,0.6)]",children:(0,m.jsx)(n.Acq,{className:"text-white text-xl"})}),(0,m.jsx)("h3",{className:"text-xl font-semibold mb-2\r text-gray-800 dark:text-cyan-100",children:"Scan QR Code"}),(0,m.jsx)("p",{className:"text-gray-600 dark:text-cyan-200/80",children:"Quickly verify product authenticity"})]})}),y&&"producer"===y.role&&(0,m.jsx)(i.A,{delay:.2,className:"group cursor-pointer",onClick:()=>e("/admin/add"),children:(0,m.jsxs)("div",{className:"p-6 rounded-2xl transition-all duration-300 shadow-lg\r bg-white/80 hover:bg-white/90 border border-gray-200/50\r dark:bg-slate-800/30 dark:hover:bg-slate-800/50 dark:border-emerald-500/30\r dark:backdrop-blur-xl dark:shadow-emerald-500/20\r dark:hover:shadow-emerald-400/40 dark:hover:border-emerald-400/50\r dark:hover:shadow-2xl dark:hover:scale-105",children:[(0,m.jsx)("div",{className:"w-12 h-12 rounded-xl mb-4 flex items-center justify-center\r bg-gradient-to-r from-green-500 to-emerald-500\r group-hover:scale-110 transition-transform duration-300\r dark:shadow-[0_0_20px_rgba(16,185,129,0.4)]\r dark:group-hover:shadow-[0_0_30px_rgba(16,185,129,0.6)]",children:(0,m.jsx)(n.OiG,{className:"text-white text-xl"})}),(0,m.jsx)("h3",{className:"text-xl font-semibold mb-2\r text-gray-800 dark:text-emerald-100",children:"Add Product"}),(0,m.jsx)("p",{className:"text-gray-600 dark:text-emerald-200/80",children:"Register new products on blockchain"})]})}),(0,m.jsx)(i.A,{delay:.3,className:"group cursor-pointer",onClick:()=>e("/admin/dashboard"),children:(0,m.jsxs)("div",{className:"p-6 rounded-2xl transition-all duration-300 shadow-lg\r bg-white/80 hover:bg-white/90 border border-gray-200/50\r dark:bg-slate-800/30 dark:hover:bg-slate-800/50 dark:border-purple-500/30\r dark:backdrop-blur-xl dark:shadow-purple-500/20\r dark:hover:shadow-purple-400/40 dark:hover:border-purple-400/50\r dark:hover:shadow-2xl dark:hover:scale-105",children:[(0,m.jsx)("div",{className:"w-12 h-12 rounded-xl mb-4 flex items-center justify-center\r bg-gradient-to-r from-purple-500 to-pink-500\r group-hover:scale-110 transition-transform duration-300\r dark:shadow-[0_0_20px_rgba(168,85,247,0.4)]\r dark:group-hover:shadow-[0_0_30px_rgba(168,85,247,0.6)]",children:(0,m.jsx)(n.YYR,{className:"text-white text-xl"})}),(0,m.jsx)("h3",{className:"text-xl font-semibold mb-2\r text-gray-800 dark:text-purple-100",children:"Dashboard"}),(0,m.jsx)("p",{className:"text-gray-600 dark:text-purple-200/80",children:"View analytics and insights"})]})})]}),(0,m.jsx)(i.A,{delay:.35,className:"max-w-4xl mx-auto mb-12",children:(0,m.jsx)(g,{className:"p-8",refreshInterval:8e3})}),(0,m.jsx)(i.A,{delay:.38,className:"max-w-2xl mx-auto mb-12",children:(0,m.jsx)(h,{user:y})}),(0,m.jsx)(i.A,{delay:.42,className:"max-w-6xl mx-auto mb-12",children:(0,m.jsxs)("div",{className:"p-8 rounded-2xl shadow-xl transition-all duration-500\r bg-white/95 border-2 border-gray-200/60\r dark:bg-gradient-to-br dark:from-slate-800/80 dark:to-slate-900/80 \r dark:border-blue-400/40 dark:backdrop-blur-xl \r dark:shadow-blue-500/20 dark:hover:shadow-blue-400/30",children:[(0,m.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,m.jsx)("h2",{className:"text-2xl font-bold\r text-gray-800 dark:text-blue-100 \r dark:drop-shadow-[0_0_10px_rgba(59,130,246,0.5)]",children:"Recent Products"}),(0,m.jsxs)("button",{onClick:A,className:"text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 flex items-center gap-2",children:[(0,m.jsx)("span",{children:"Refresh"}),(0,m.jsx)(n.OKX,{className:w?"animate-spin":""})]})]}),I&&(0,m.jsxs)("div",{className:"bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 p-4 rounded-lg mb-6 flex items-center gap-3",children:[(0,m.jsx)(n.TNq,{}),(0,m.jsxs)("span",{children:["Error loading recent products: ",I]})]}),w&&0===j.length?(0,m.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((e,t)=>(0,m.jsx)("div",{className:"animate-pulse bg-gray-200 dark:bg-gray-700 rounded-xl h-64"},t))}):j.length>0?(0,m.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:j.map(t=>{var r;return(0,m.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl overflow-hidden shadow-md hover:shadow-lg transition-shadow border border-gray-200 dark:border-gray-700 flex flex-col",children:[(0,m.jsxs)("div",{className:"h-40 bg-gray-100 dark:bg-gray-700 relative",children:[null!==(r=t.imageFile)&&void 0!==r&&r.publicUrl?(0,m.jsx)("img",{src:t.imageFile.publicUrl,alt:t.name||"Product",className:"w-full h-full object-cover",onError:e=>{e.target.onerror=null,e.target.src="https://via.placeholder.com/400x200?text=No+Image"}}):(0,m.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,m.jsx)(n.TXh,{className:"text-gray-400 text-4xl"})}),t.stages&&t.stages.length>0&&(0,m.jsx)("div",{className:"absolute top-2 right-2 bg-blue-500 text-white text-xs font-bold py-1 px-2 rounded-full",children:t.stages[t.stages.length-1]||t.stage||"Created"})]}),(0,m.jsxs)("div",{className:"p-4 flex-grow",children:[(0,m.jsx)("h3",{className:"font-semibold text-gray-800 dark:text-gray-100 mb-1 truncate",children:t.name||"Unnamed Product"}),(0,m.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2 truncate",children:["ID: ",t.productId||t._id||"Unknown"]}),(0,m.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-500 mb-4",children:t.createdAt?new Date(t.createdAt).toLocaleDateString():"Unknown date"})]}),(0,m.jsx)("div",{className:"p-4 pt-0 mt-auto",children:(0,m.jsxs)("button",{onClick:()=>e(`/product/${t.productId}`),className:"w-full py-2 text-center bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors text-sm font-medium flex items-center justify-center gap-2",children:[(0,m.jsx)(n.Ny1,{}),(0,m.jsx)("span",{children:"View Details"})]})})]},t.productId||t._id)})}):(0,m.jsxs)("div",{className:"text-center py-12",children:[(0,m.jsx)(n.TXh,{className:"text-gray-400 text-4xl mx-auto mb-4"}),(0,m.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"No products found"}),y&&"producer"===y.role&&(0,m.jsxs)("button",{onClick:()=>e("/admin/add"),className:"mt-4 px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors text-sm inline-flex items-center gap-2",children:[(0,m.jsx)(n.OiG,{}),(0,m.jsx)("span",{children:"Add Your First Product"})]})]})]})})]})]}):(0,m.jsxs)("div",{className:"min-h-screen relative overflow-hidden transition-all duration-1000\r bg-gradient-to-br from-blue-50 via-indigo-100 to-purple-100 \r dark:bg-gradient-to-br dark:from-slate-900 dark:via-indigo-950 dark:to-purple-950",children:[(0,m.jsx)("div",{className:"absolute inset-0 opacity-40 dark:opacity-70 transition-opacity duration-1000",children:(0,m.jsx)(x.A,{count:80})}),(0,m.jsxs)("div",{className:"absolute inset-0 opacity-30 dark:opacity-0 transition-opacity duration-1000",children:[(0,m.jsx)("div",{className:"absolute top-1/4 left-1/4 w-64 h-64 rounded-full bg-gradient-to-r from-blue-200/50 to-purple-200/50 animate-pulse blur-3xl"}),(0,m.jsx)("div",{className:"absolute bottom-1/4 right-1/4 w-48 h-48 rounded-full bg-gradient-to-r from-purple-200/50 to-pink-200/50 animate-pulse delay-1000 blur-2xl"}),(0,m.jsx)("div",{className:"absolute top-1/2 right-1/3 w-32 h-32 rounded-full bg-gradient-to-r from-cyan-200/50 to-blue-200/50 animate-bounce blur-xl"})]}),(0,m.jsxs)("div",{className:"absolute inset-0 opacity-0 dark:opacity-20 transition-opacity duration-1000 overflow-hidden",children:[Array.from({length:20}).map((e,t)=>(0,m.jsx)("div",{className:"absolute w-1 bg-gradient-to-b from-transparent via-cyan-400 to-transparent animate-pulse",style:{left:5+4*t+"%",height:"100%",animationDelay:.1*t+"s",animationDuration:"3s"}},t)),(0,m.jsx)("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-b from-transparent via-purple-900/10 to-transparent"})]}),(0,m.jsx)(o.N9,{position:"top-center",theme:"auto"}),(0,m.jsx)("div",{className:"relative z-10 flex items-center justify-center min-h-screen px-4",children:(0,m.jsxs)("div",{className:"text-center max-w-4xl mx-auto",children:[(0,m.jsxs)(l.P.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},className:"mb-12",children:[(0,m.jsx)("div",{className:"max-w-md mx-auto h-64 mb-8",children:(0,m.jsx)(d.A,{variant:"hero"})}),(0,m.jsxs)("h1",{className:"text-5xl md:text-7xl font-bold mb-6 leading-tight\r text-gray-800 dark:text-transparent\r dark:bg-gradient-to-r dark:from-cyan-300 dark:via-purple-300 dark:to-pink-300 \r dark:bg-clip-text dark:animate-pulse",children:["Welcome to",(0,m.jsx)("span",{className:"bg-gradient-to-r from-blue-600 to-purple-600 \r dark:from-cyan-400 dark:via-purple-400 dark:to-pink-400 \r bg-clip-text text-transparent block\r dark:drop-shadow-[0_0_30px_rgba(0,255,255,0.6)]\r dark:filter dark:brightness-125",children:"TraceChain"})]}),(0,m.jsx)("p",{className:"text-xl mb-8 max-w-2xl mx-auto\r text-gray-600 dark:text-cyan-100 \r dark:drop-shadow-[0_0_10px_rgba(0,255,255,0.4)]",children:"Experience transparent, secure product traceability powered by blockchain technology"}),(0,m.jsx)("div",{className:"hidden dark:block absolute inset-0 pointer-events-none",children:(0,m.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 \r w-[800px] h-[800px] bg-gradient-conic from-cyan-500/20 via-purple-500/20 to-pink-500/20 \r rounded-full blur-3xl animate-spin",style:{animationDuration:"20s"}})})]}),(0,m.jsxs)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"flex flex-wrap gap-4 justify-center",children:[(0,m.jsx)(c.A,{variant:"primary",size:"lg",onClick:()=>{console.log("Get Started button clicked"),e("/auth/login")},children:"Get Started"}),(0,m.jsxs)(c.A,{variant:"ghost",size:"lg",onClick:()=>{console.log("Scan QR Code button clicked"),e("/scan")},children:[(0,m.jsx)(n.Acq,{className:"mr-2"}),"Scan QR Code"]})]})]})})]})}}}]);